<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NetOdak - Fotosentez SimÃ¼lasyonu</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .game-container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 2.5rem;
            background: linear-gradient(135deg, #2e7d32 0%, #4caf50 100%);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }
        
        .game-stats {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .stat-box {
            text-align: center;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 1rem;
            border-radius: 12px;
        }
        
        .stat-box label {
            display: block;
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .stat-box span {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2e7d32;
        }
        
        .controls-panel {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .controls-title {
            font-size: 1.5rem;
            color: #2e7d32;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .factor-group {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .factor-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
            font-size: 1rem;
        }
        
        .factor-control {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .factor-control input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .factor-control input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2e7d32;
            cursor: pointer;
        }
        
        .factor-control input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2e7d32;
            cursor: pointer;
            border: none;
        }
        
        .factor-value {
            min-width: 80px;
            text-align: center;
            font-weight: bold;
            color: #2e7d32;
            font-size: 1.1rem;
        }
        
        .plants-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .plant-card {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .plant-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .plant-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2e7d32;
        }
        
        .plant-icon {
            font-size: 3rem;
            color: #4caf50;
        }
        
        .plant-visual {
            height: 250px;
            margin: 1rem 0;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            background: linear-gradient(to top, #8bc34a 0%, #c8e6c9 100%);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .plant-canvas {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
        
        .value-animation {
            animation: pulse-value 0.5s ease-in-out;
        }
        
        @keyframes pulse-value {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); color: #2e7d32; }
        }
        
        .factor-animation {
            animation: slide-up 0.3s ease-out;
        }
        
        @keyframes slide-up {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .photosynthesis-rate {
            margin-top: 1rem;
        }
        
        .rate-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .rate-bar {
            width: 100%;
            height: 25px;
            background: #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }
        
        .rate-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50 0%, #66bb6a 50%, #81c784 100%);
            transition: width 0.3s ease;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .rate-value {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: #333;
            font-size: 0.9rem;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }
        
        .btn {
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #2e7d32;
            color: white;
        }
        
        .btn-primary:hover {
            background: #1b5e20;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #7f8c8d;
        }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <div class="logo">
                <img src="images/logo.png" alt="NetOdak Logo">
                NetOdak
            </div>
            <div class="nav-links">
                <a href="ana-sayfa.html"><i class="fas fa-home"></i> Ana Sayfa</a>
                <a href="analiz.html"><i class="fas fa-chart-line"></i> Analiz</a>
                <a href="oyunlar.html"><i class="fas fa-gamepad"></i> Oyunlar</a>
                <a href="homework.html"><i class="fas fa-tasks"></i> Ã–dev ve Hedefler</a>
                <a href="profil.html"><i class="fas fa-user"></i> Profilim</a>
                <a href="chat.html"><i class="fas fa-robot"></i> Yapay Zeka</a>
            </div>
            <div class="menu-button">â˜°</div>
        </div>
    </nav>

    <section class="game-section">
        <div class="container">
            <h2>Fotosentez SimÃ¼lasyonu</h2>
            <div class="game-container">
                <div class="game-stats">
                    <div class="stat-box">
                        <label>Ortalama Fotosentez</label>
                        <span id="avg-rate">0%</span>
                    </div>
                    <div class="stat-box">
                        <label>Toplam Bitki</label>
                        <span id="plant-count">6</span>
                    </div>
                    <div class="stat-box">
                        <label>En YÃ¼ksek HÄ±z</label>
                        <span id="max-rate">0%</span>
                    </div>
                    <div class="stat-box">
                        <label>En DÃ¼ÅŸÃ¼k HÄ±z</label>
                        <span id="min-rate">0%</span>
                    </div>
                </div>
                
                <div class="controls-panel">
                    <h3 class="controls-title">Fotosentez FaktÃ¶rleri</h3>
                    
                    <div class="factor-group">
                        <label><i class="fas fa-sun"></i> IÅŸÄ±k Åžiddeti (Lux)</label>
                        <div class="factor-control">
                            <input type="range" id="light" min="0" max="100" value="70" oninput="updateFactor('light', this.value)">
                            <span class="factor-value" id="light-value">70%</span>
                        </div>
                    </div>
                    
                    <div class="factor-group">
                        <label><i class="fas fa-thermometer-half"></i> SÄ±caklÄ±k (Â°C)</label>
                        <div class="factor-control">
                            <input type="range" id="temperature" min="0" max="50" value="25" oninput="updateFactor('temperature', this.value)">
                            <span class="factor-value" id="temperature-value">25Â°C</span>
                        </div>
                    </div>
                    
                    <div class="factor-group">
                        <label><i class="fas fa-cloud"></i> COâ‚‚ Konsantrasyonu (ppm)</label>
                        <div class="factor-control">
                            <input type="range" id="co2" min="200" max="1000" value="400" oninput="updateFactor('co2', this.value)">
                            <span class="factor-value" id="co2-value">400 ppm</span>
                        </div>
                    </div>
                    
                    <div class="factor-group">
                        <label><i class="fas fa-tint"></i> Su MiktarÄ± (%)</label>
                        <div class="factor-control">
                            <input type="range" id="water" min="0" max="100" value="60" oninput="updateFactor('water', this.value)">
                            <span class="factor-value" id="water-value">60%</span>
                        </div>
                    </div>
                    
                    <div class="factor-group">
                        <label><i class="fas fa-wind"></i> Nem OranÄ± (%)</label>
                        <div class="factor-control">
                            <input type="range" id="humidity" min="0" max="100" value="50" oninput="updateFactor('humidity', this.value)">
                            <span class="factor-value" id="humidity-value">50%</span>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="startSimulation()">
                            <i class="fas fa-play"></i> SimÃ¼lasyonu BaÅŸlat
                        </button>
                        <button class="btn btn-secondary" onclick="resetSimulation()">
                            <i class="fas fa-redo"></i> SÄ±fÄ±rla
                        </button>
                    </div>
                </div>
                
                <div class="plants-container" id="plantsContainer">
                    <!-- Bitkiler buraya eklenecek -->
                </div>
            </div>
        </div>
    </section>

    <script>
        // Bitki tÃ¼rleri
        const plants = [
            { name: 'MeÅŸe AÄŸacÄ±', icon: 'ðŸŒ³', baseRate: 80, optimalTemp: 22, optimalLight: 75 },
            { name: 'Ã‡am AÄŸacÄ±', icon: 'ðŸŒ²', baseRate: 70, optimalTemp: 18, optimalLight: 70 },
            { name: 'GÃ¼l', icon: 'ðŸŒ¹', baseRate: 85, optimalTemp: 25, optimalLight: 80 },
            { name: 'Domates', icon: 'ðŸ…', baseRate: 90, optimalTemp: 28, optimalLight: 85 },
            { name: 'MÄ±sÄ±r', icon: 'ðŸŒ½', baseRate: 75, optimalTemp: 26, optimalLight: 75 },
            { name: 'Biber', icon: 'ðŸŒ¶ï¸', baseRate: 88, optimalTemp: 27, optimalLight: 82 }
        ];
        
        // FaktÃ¶rler
        let factors = {
            light: 70,
            temperature: 25,
            co2: 400,
            water: 60,
            humidity: 50
        };
        
        let targetFactors = {
            light: 70,
            temperature: 25,
            co2: 400,
            water: 60,
            humidity: 50
        };
        
        let isRunning = false;
        let animationId = null;
        let time = 0;
        
        // Bitkileri oluÅŸtur
        function createPlants() {
            const container = document.getElementById('plantsContainer');
            container.innerHTML = '';
            
            plants.forEach((plant, index) => {
                const plantCard = document.createElement('div');
                plantCard.className = 'plant-card';
                plantCard.innerHTML = `
                    <div class="plant-header">
                        <div class="plant-name">${plant.name}</div>
                        <div class="plant-icon">${plant.icon}</div>
                    </div>
                    <div class="plant-visual">
                        <canvas class="plant-canvas" id="canvas-${index}"></canvas>
                    </div>
                    <div class="photosynthesis-rate">
                        <div class="rate-label">Fotosentez HÄ±zÄ±</div>
                        <div class="rate-bar">
                            <div class="rate-fill" id="rate-fill-${index}" style="width: 0%;">0%</div>
                            <div class="rate-value" id="rate-value-${index}">0%</div>
                        </div>
                    </div>
                `;
                container.appendChild(plantCard);
            });
        }
        
        // FaktÃ¶r gÃ¼ncelle
        function updateFactor(factor, value) {
            targetFactors[factor] = parseFloat(value);
            
            // DeÄŸer gÃ¶sterimi
            const valueElement = document.getElementById(factor + '-value');
            if (factor === 'light') {
                valueElement.textContent = value + '%';
            } else if (factor === 'temperature') {
                valueElement.textContent = value + 'Â°C';
            } else if (factor === 'co2') {
                valueElement.textContent = value + ' ppm';
            } else if (factor === 'water') {
                valueElement.textContent = value + '%';
            } else if (factor === 'humidity') {
                valueElement.textContent = value + '%';
            }
            
            // Animasyon ekle
            valueElement.classList.add('value-animation');
            setTimeout(() => valueElement.classList.remove('value-animation'), 500);
        }
        
        // FaktÃ¶rleri yavaÅŸÃ§a hedefe ulaÅŸtÄ±r (animasyon iÃ§in)
        function updateFactorsSmoothly() {
            const speed = 0.05;
            Object.keys(factors).forEach(key => {
                const diff = targetFactors[key] - factors[key];
                factors[key] += diff * speed;
            });
        }
        
        // Fotosentez hÄ±zÄ±nÄ± hesapla
        function calculatePhotosynthesis() {
            let totalRate = 0;
            let maxRate = 0;
            let minRate = 100;
            
            plants.forEach((plant, index) => {
                // Optimal deÄŸerlere gÃ¶re hesaplama
                let rate = plant.baseRate;
                
                // IÅŸÄ±k faktÃ¶rÃ¼ (0-100% arasÄ± optimal)
                const lightFactor = Math.max(0, 1 - Math.abs(factors.light - plant.optimalLight) / plant.optimalLight);
                rate *= (0.5 + lightFactor * 0.5);
                
                // SÄ±caklÄ±k faktÃ¶rÃ¼ (optimal sÄ±caklÄ±ÄŸa yakÄ±nlÄ±k)
                const tempDiff = Math.abs(factors.temperature - plant.optimalTemp);
                const tempFactor = Math.max(0, 1 - tempDiff / 30);
                rate *= (0.6 + tempFactor * 0.4);
                
                // CO2 faktÃ¶rÃ¼ (400-600 ppm optimal)
                const co2Factor = factors.co2 < 400 ? factors.co2 / 400 : 
                                  factors.co2 > 600 ? Math.max(0, 1 - (factors.co2 - 600) / 400) : 1;
                rate *= (0.7 + co2Factor * 0.3);
                
                // Su faktÃ¶rÃ¼
                const waterFactor = factors.water / 100;
                rate *= (0.5 + waterFactor * 0.5);
                
                // Nem faktÃ¶rÃ¼
                const humidityFactor = factors.humidity / 100;
                rate *= (0.8 + humidityFactor * 0.2);
                
                // Rate'i 0-100 arasÄ±na sÄ±nÄ±rla
                rate = Math.max(0, Math.min(100, rate));
                
                // GÃ¶rsel gÃ¼ncellemeler
                const rateFill = document.getElementById(`rate-fill-${index}`);
                const rateValue = document.getElementById(`rate-value-${index}`);
                
                rateFill.style.width = rate + '%';
                rateFill.textContent = Math.round(rate) + '%';
                rateValue.textContent = Math.round(rate) + '%';
                
                // Canvas ile bitki Ã§iz
                drawPlant(index, rate, plant);
                
                totalRate += rate;
                maxRate = Math.max(maxRate, rate);
                minRate = Math.min(minRate, rate);
            });
            
            // Ä°statistikleri gÃ¼ncelle (animasyonlu)
            const avgRate = totalRate / plants.length;
            const avgElement = document.getElementById('avg-rate');
            const maxElement = document.getElementById('max-rate');
            const minElement = document.getElementById('min-rate');
            
            avgElement.textContent = Math.round(avgRate) + '%';
            maxElement.textContent = Math.round(maxRate) + '%';
            minElement.textContent = Math.round(minRate) + '%';
            
            // Animasyon ekle
            if (isRunning) {
                avgElement.classList.add('value-animation');
                maxElement.classList.add('value-animation');
                minElement.classList.add('value-animation');
                setTimeout(() => {
                    avgElement.classList.remove('value-animation');
                    maxElement.classList.remove('value-animation');
                    minElement.classList.remove('value-animation');
                }, 500);
            }
        }
        
        // Bitki Ã§iz (canvas ile)
        function drawPlant(index, rate, plant) {
            const canvas = document.getElementById(`canvas-${index}`);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const centerX = canvas.width / 2;
            const groundY = canvas.height - 20;
            const plantHeight = Math.max(40, (rate / 100) * (canvas.height - 40));
            
            // Toprak (gradient ile daha gÃ¼zel)
            const groundGradient = ctx.createLinearGradient(0, groundY, 0, groundY + 20);
            groundGradient.addColorStop(0, '#8d6e63');
            groundGradient.addColorStop(0.5, '#6d4c41');
            groundGradient.addColorStop(1, '#5d4037');
            ctx.fillStyle = groundGradient;
            ctx.fillRect(0, groundY, canvas.width, 20);
            
            // Toprak Ã¼zeri Ã§im detaylarÄ±
            ctx.fillStyle = '#558b2f';
            for (let i = 0; i < 20; i++) {
                const grassX = (canvas.width / 20) * i + Math.random() * 5;
                ctx.fillRect(grassX, groundY - 2, 2, 4);
            }
            
            // Bitki tipine gÃ¶re Ã§iz
            if (plant.name.includes('AÄŸacÄ±') || plant.name === 'MeÅŸe' || plant.name === 'Ã‡am') {
                drawTree(ctx, centerX, groundY, plantHeight, rate, plant);
            } else if (plant.name === 'GÃ¼l') {
                drawRose(ctx, centerX, groundY, plantHeight, rate);
            } else if (plant.name === 'Domates') {
                drawTomato(ctx, centerX, groundY, plantHeight, rate);
            } else if (plant.name === 'MÄ±sÄ±r') {
                drawCorn(ctx, centerX, groundY, plantHeight, rate);
            } else if (plant.name === 'Biber') {
                drawPepper(ctx, centerX, groundY, plantHeight, rate);
            }
        }
        
        // AÄŸaÃ§ Ã§iz (daha gÃ¼zel ve estetik)
        function drawTree(ctx, x, groundY, height, rate, plant) {
            const trunkWidth = 12 + (rate / 100) * 12;
            const trunkHeight = height * 0.65;
            
            // GÃ¶vde gradient (daha gerÃ§ekÃ§i)
            const trunkGradient = ctx.createLinearGradient(x - trunkWidth/2, groundY - trunkHeight, x + trunkWidth/2, groundY);
            trunkGradient.addColorStop(0, '#3e2723');
            trunkGradient.addColorStop(0.3, '#4e342e');
            trunkGradient.addColorStop(0.7, '#5d4037');
            trunkGradient.addColorStop(1, '#3e2723');
            
            // GÃ¶vde
            ctx.fillStyle = trunkGradient;
            ctx.fillRect(x - trunkWidth/2, groundY - trunkHeight, trunkWidth, trunkHeight);
            
            // GÃ¶vde detaylarÄ± (kabuk Ã§izgileri - daha doÄŸal)
            ctx.strokeStyle = 'rgba(30, 20, 15, 0.4)';
            ctx.lineWidth = 1.5;
            for (let i = 0; i < 10; i++) {
                const y = groundY - trunkHeight + (trunkHeight / 10) * i;
                const wave = Math.sin(i * 0.8) * 2;
                ctx.beginPath();
                ctx.moveTo(x - trunkWidth/2 + 3, y + wave);
                ctx.quadraticCurveTo(x, y, x + trunkWidth/2 - 3, y + wave);
                ctx.stroke();
            }
            
            // Yan gÃ¶lge (daha yumuÅŸak)
            const shadowGradient = ctx.createLinearGradient(x + trunkWidth/2 - 4, groundY - trunkHeight, x + trunkWidth/2, groundY);
            shadowGradient.addColorStop(0, 'rgba(0, 0, 0, 0.3)');
            shadowGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
            ctx.fillStyle = shadowGradient;
            ctx.fillRect(x + trunkWidth/2 - 4, groundY - trunkHeight, 4, trunkHeight);
            
            // Yapraklar (taÃ§) - daha estetik ve doÄŸal
            const crownSize = Math.max(35, (rate / 100) * 85);
            const crownY = groundY - trunkHeight - crownSize * 0.4;
            
            // Daha fazla yaprak kÃ¼mesi (daha doÄŸal gÃ¶rÃ¼nÃ¼m)
            const leafClusters = [
                {x: x, y: crownY, size: crownSize, color: '#2e7d32', angle: 0},
                {x: x - crownSize * 0.4, y: crownY - crownSize * 0.3, size: crownSize * 0.8, color: '#388e3c', angle: -0.3},
                {x: x + crownSize * 0.4, y: crownY - crownSize * 0.3, size: crownSize * 0.8, color: '#388e3c', angle: 0.3},
                {x: x - crownSize * 0.3, y: crownY + crownSize * 0.25, size: crownSize * 0.65, color: '#43a047', angle: -0.2},
                {x: x + crownSize * 0.3, y: crownY + crownSize * 0.25, size: crownSize * 0.65, color: '#43a047', angle: 0.2},
                {x: x - crownSize * 0.5, y: crownY, size: crownSize * 0.55, color: '#4caf50', angle: -0.5},
                {x: x + crownSize * 0.5, y: crownY, size: crownSize * 0.55, color: '#4caf50', angle: 0.5},
            ];
            
            leafClusters.forEach(cluster => {
                // Yaprak kÃ¼mesi gÃ¶lgesi (daha yumuÅŸak)
                ctx.fillStyle = 'rgba(0, 0, 0, 0.12)';
                ctx.beginPath();
                ctx.ellipse(cluster.x + 3, cluster.y + 3, cluster.size, cluster.size * 0.85, cluster.angle, 0, Math.PI * 2);
                ctx.fill();
                
                // Ana yaprak kÃ¼mesi (daha zengin gradient)
                const gradient = ctx.createRadialGradient(
                    cluster.x - cluster.size * 0.4, cluster.y - cluster.size * 0.4,
                    0, cluster.x, cluster.y, cluster.size
                );
                gradient.addColorStop(0, '#81c784');
                gradient.addColorStop(0.3, '#66bb6a');
                gradient.addColorStop(0.6, cluster.color);
                gradient.addColorStop(1, '#1b5e20');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.ellipse(cluster.x, cluster.y, cluster.size, cluster.size * 0.85, cluster.angle, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak highlight (daha belirgin)
                const highlightGradient = ctx.createRadialGradient(
                    cluster.x - cluster.size * 0.35, cluster.y - cluster.size * 0.35,
                    0, cluster.x - cluster.size * 0.2, cluster.y - cluster.size * 0.2, cluster.size * 0.4
                );
                highlightGradient.addColorStop(0, 'rgba(255, 255, 255, 0.3)');
                highlightGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                ctx.fillStyle = highlightGradient;
                ctx.beginPath();
                ctx.ellipse(cluster.x - cluster.size * 0.25, cluster.y - cluster.size * 0.25, 
                          cluster.size * 0.4, cluster.size * 0.25, cluster.angle + Math.PI / 4, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // IÅŸÄ±k efekti (fotosentez hÄ±zÄ±na gÃ¶re - daha yumuÅŸak)
            if (rate > 40) {
                const lightGradient = ctx.createRadialGradient(x, crownY, 0, x, crownY, crownSize * 1.3);
                lightGradient.addColorStop(0, `rgba(255, 255, 150, ${Math.min(0.4, (rate - 40) / 200)})`);
                lightGradient.addColorStop(0.5, `rgba(255, 255, 100, ${Math.min(0.2, (rate - 40) / 300)})`);
                lightGradient.addColorStop(1, 'rgba(255, 255, 100, 0)');
                ctx.fillStyle = lightGradient;
                ctx.beginPath();
                ctx.arc(x, crownY, crownSize * 1.3, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // GÃ¼l Ã§iz (gerÃ§ekÃ§i)
        function drawRose(ctx, x, groundY, height, rate) {
            // Sap (gradient ile)
            const stemGradient = ctx.createLinearGradient(x, groundY, x, groundY - height * 0.8);
            stemGradient.addColorStop(0, '#1b5e20');
            stemGradient.addColorStop(1, '#2e7d32');
            
            ctx.strokeStyle = stemGradient;
            ctx.lineWidth = 4;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(x, groundY);
            ctx.lineTo(x, groundY - height * 0.8);
            ctx.stroke();
            
            // Sap gÃ¶lgesi
            ctx.strokeStyle = 'rgba(0, 0, 0, 0.2)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(x + 1, groundY);
            ctx.lineTo(x + 1, groundY - height * 0.8);
            ctx.stroke();
            
            // Dikenler
            ctx.fillStyle = '#2e7d32';
            for (let i = 0; i < 5; i++) {
                const thornY = groundY - height * (0.2 + i * 0.15);
                ctx.beginPath();
                ctx.arc(x + (i % 2 === 0 ? 3 : -3), thornY, 2, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Yapraklar (gerÃ§ekÃ§i)
            for (let i = 0; i < 4; i++) {
                const leafY = groundY - height * (0.25 + i * 0.15);
                const leafX = x + (i % 2 === 0 ? -18 : 18);
                const leafAngle = (i % 2 === 0 ? -Math.PI / 6 : Math.PI / 6);
                
                // Yaprak gÃ¶lgesi
                ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
                ctx.beginPath();
                ctx.ellipse(leafX + 2, leafY + 2, 12, 18, leafAngle, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak
                const leafGradient = ctx.createLinearGradient(
                    leafX - 12, leafY, leafX + 12, leafY
                );
                leafGradient.addColorStop(0, '#2e7d32');
                leafGradient.addColorStop(0.5, '#4caf50');
                leafGradient.addColorStop(1, '#388e3c');
                
                ctx.fillStyle = leafGradient;
                ctx.beginPath();
                ctx.ellipse(leafX, leafY, 12, 18, leafAngle, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak damarÄ±
                ctx.strokeStyle = '#2e7d32';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(leafX, leafY);
                ctx.lineTo(leafX + Math.cos(leafAngle) * 15, leafY + Math.sin(leafAngle) * 15);
                ctx.stroke();
            }
            
            // Ã‡iÃ§ek (daha estetik gÃ¼l)
            const flowerSize = Math.max(14, (rate / 100) * 38);
            const flowerY = groundY - height * 0.8;
            
            // DÄ±ÅŸ yapraklar (daha katmanlÄ±)
            for (let layer = 0; layer < 2; layer++) {
                for (let i = 0; i < 6; i++) {
                    const angle = (i * Math.PI * 2 / 6) - Math.PI / 2;
                    const layerOffset = layer * 0.15;
                    const petalX = x + Math.cos(angle) * flowerSize * (0.5 + layerOffset);
                    const petalY = flowerY + Math.sin(angle) * flowerSize * (0.5 + layerOffset);
                    
                    // Yaprak gÃ¶lgesi
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
                    ctx.beginPath();
                    ctx.ellipse(petalX + 2, petalY + 2, flowerSize * (0.38 - layer * 0.05), 
                              flowerSize * (0.48 - layer * 0.05), angle, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Yaprak (daha zengin gradient)
                    const petalGradient = ctx.createRadialGradient(
                        petalX - flowerSize * 0.25, petalY - flowerSize * 0.25,
                        0, petalX, petalY, flowerSize * 0.45
                    );
                    if (layer === 0) {
                        petalGradient.addColorStop(0, '#f8bbd0');
                        petalGradient.addColorStop(0.5, '#f48fb1');
                        petalGradient.addColorStop(1, '#c2185b');
                    } else {
                        petalGradient.addColorStop(0, '#f48fb1');
                        petalGradient.addColorStop(1, '#ad1457');
                    }
                    
                    ctx.fillStyle = petalGradient;
                    ctx.beginPath();
                    ctx.ellipse(petalX, petalY, flowerSize * (0.38 - layer * 0.05), 
                              flowerSize * (0.48 - layer * 0.05), angle, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // Ä°Ã§ yapraklar (daha yumuÅŸak)
            for (let i = 0; i < 5; i++) {
                const angle = (i * Math.PI * 2 / 5) - Math.PI / 2;
                const petalX = x + Math.cos(angle) * flowerSize * 0.25;
                const petalY = flowerY + Math.sin(angle) * flowerSize * 0.25;
                
                const innerGradient = ctx.createRadialGradient(
                    petalX, petalY, 0, petalX, petalY, flowerSize * 0.3
                );
                innerGradient.addColorStop(0, '#f8bbd0');
                innerGradient.addColorStop(1, '#f48fb1');
                
                ctx.fillStyle = innerGradient;
                ctx.beginPath();
                ctx.ellipse(petalX, petalY, flowerSize * 0.28, flowerSize * 0.38, angle + 0.2, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Merkez (daha parlak)
            const centerGradient = ctx.createRadialGradient(x, flowerY, 0, x, flowerY, flowerSize * 0.28);
            centerGradient.addColorStop(0, '#fff9c4');
            centerGradient.addColorStop(0.5, '#fff176');
            centerGradient.addColorStop(1, '#ffc107');
            
            ctx.fillStyle = centerGradient;
            ctx.beginPath();
            ctx.arc(x, flowerY, flowerSize * 0.28, 0, Math.PI * 2);
            ctx.fill();
            
            // Merkez highlight (daha belirgin)
            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.beginPath();
            ctx.arc(x - 4, flowerY - 4, flowerSize * 0.12, 0, Math.PI * 2);
            ctx.fill();
            
            // Merkez detay (nokta)
            ctx.fillStyle = '#ff8f00';
            ctx.beginPath();
            ctx.arc(x - 2, flowerY - 2, 2, 0, Math.PI * 2);
            ctx.fill();
        }
        
        // Domates Ã§iz (gerÃ§ekÃ§i)
        function drawTomato(ctx, x, groundY, height, rate) {
            // Ana gÃ¶vde (gradient)
            const stemGradient = ctx.createLinearGradient(x, groundY, x, groundY - height * 0.7);
            stemGradient.addColorStop(0, '#1b5e20');
            stemGradient.addColorStop(1, '#2e7d32');
            
            ctx.strokeStyle = stemGradient;
            ctx.lineWidth = 5;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(x, groundY);
            ctx.lineTo(x, groundY - height * 0.7);
            ctx.stroke();
            
            // Yan dallar
            ctx.lineWidth = 3;
            for (let i = 0; i < 3; i++) {
                const branchY = groundY - height * (0.3 + i * 0.15);
                ctx.beginPath();
                ctx.moveTo(x, branchY);
                ctx.lineTo(x + (i % 2 === 0 ? -12 : 12), branchY - 10);
                ctx.stroke();
            }
            
            // Yapraklar (gerÃ§ekÃ§i)
            for (let i = 0; i < 5; i++) {
                const angle = (i * Math.PI * 2 / 5);
                const leafX = x + Math.cos(angle) * 22;
                const leafY = groundY - height * (0.45 + i * 0.08);
                
                // Yaprak gÃ¶lgesi
                ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
                ctx.beginPath();
                ctx.ellipse(leafX + 2, leafY + 2, 14, 20, angle, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak
                const leafGradient = ctx.createLinearGradient(
                    leafX - 14, leafY, leafX + 14, leafY
                );
                leafGradient.addColorStop(0, '#2e7d32');
                leafGradient.addColorStop(0.5, '#4caf50');
                leafGradient.addColorStop(1, '#388e3c');
                
                ctx.fillStyle = leafGradient;
                ctx.beginPath();
                // Yaprak ÅŸekli (asimetrik)
                ctx.ellipse(leafX, leafY, 14, 20, angle, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak damarlarÄ±
                ctx.strokeStyle = '#2e7d32';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(leafX, leafY);
                ctx.lineTo(leafX + Math.cos(angle) * 18, leafY + Math.sin(angle) * 18);
                ctx.stroke();
            }
            
            // Domatesler (daha estetik)
            const tomatoCount = Math.floor(rate / 18);
            for (let i = 0; i < Math.min(tomatoCount, 6); i++) {
                const tomatoY = groundY - height * (0.25 + i * 0.12);
                const tomatoX = x + (i % 2 === 0 ? -20 : 20) + (i % 3 === 0 ? 0 : (i % 2 === 0 ? -6 : 6));
                const tomatoSize = 11 + Math.sin(i) * 2;
                
                // Domates gÃ¶lgesi (daha yumuÅŸak)
                const shadowGradient = ctx.createRadialGradient(
                    tomatoX + 2, tomatoY + 2, 0, tomatoX + 2, tomatoY + 2, tomatoSize
                );
                shadowGradient.addColorStop(0, 'rgba(0, 0, 0, 0.3)');
                shadowGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
                ctx.fillStyle = shadowGradient;
                ctx.beginPath();
                ctx.ellipse(tomatoX + 2, tomatoY + 2, tomatoSize, tomatoSize, Math.PI / 6, 0, Math.PI * 2);
                ctx.fill();
                
                // Domates (daha zengin gradient)
                const tomatoGradient = ctx.createRadialGradient(
                    tomatoX - 4, tomatoY - 4, 0, tomatoX, tomatoY, tomatoSize
                );
                tomatoGradient.addColorStop(0, '#ff8a65');
                tomatoGradient.addColorStop(0.3, '#ff7043');
                tomatoGradient.addColorStop(0.6, '#f44336');
                tomatoGradient.addColorStop(1, '#d32f2f');
                
                ctx.fillStyle = tomatoGradient;
                ctx.beginPath();
                ctx.ellipse(tomatoX, tomatoY, tomatoSize, tomatoSize, Math.PI / 6, 0, Math.PI * 2);
                ctx.fill();
                
                // Domates highlight (daha belirgin)
                ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.beginPath();
                ctx.arc(tomatoX - 4, tomatoY - 4, 5, 0, Math.PI * 2);
                ctx.fill();
                
                // Ä°kinci highlight (daha yumuÅŸak)
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.beginPath();
                ctx.arc(tomatoX - 2, tomatoY - 2, 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak (yeÅŸil sap - daha detaylÄ±)
                const stemGradient = ctx.createRadialGradient(
                    tomatoX, tomatoY - 12, 0, tomatoX, tomatoY - 12, 7
                );
                stemGradient.addColorStop(0, '#4caf50');
                stemGradient.addColorStop(1, '#2e7d32');
                ctx.fillStyle = stemGradient;
                ctx.beginPath();
                ctx.arc(tomatoX, tomatoY - 12, 7, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak detaylarÄ± (daha gerÃ§ekÃ§i)
                ctx.fillStyle = '#388e3c';
                for (let j = 0; j < 4; j++) {
                    const leafAngle = (j * Math.PI * 2 / 4) - Math.PI / 2;
                    ctx.beginPath();
                    ctx.ellipse(
                        tomatoX + Math.cos(leafAngle) * 5,
                        tomatoY - 12 + Math.sin(leafAngle) * 5,
                        3, 4, leafAngle, 0, Math.PI * 2
                    );
                    ctx.fill();
                }
            }
        }
        
        // MÄ±sÄ±r Ã§iz (daha estetik ve gerÃ§ekÃ§i)
        function drawCorn(ctx, x, groundY, height, rate) {
            const stalkWidth = 8 + (rate / 100) * 4;
            
            // Ana sap (daha kalÄ±n ve gerÃ§ekÃ§i)
            const stalkGradient = ctx.createLinearGradient(x - stalkWidth/2, groundY, x + stalkWidth/2, groundY - height);
            stalkGradient.addColorStop(0, '#1b5e20');
            stalkGradient.addColorStop(0.3, '#2e7d32');
            stalkGradient.addColorStop(0.7, '#388e3c');
            stalkGradient.addColorStop(1, '#4caf50');
            
            ctx.fillStyle = stalkGradient;
            ctx.fillRect(x - stalkWidth/2, groundY - height, stalkWidth, height);
            
            // Sap gÃ¶lgesi (daha yumuÅŸak)
            const stalkShadowGradient = ctx.createLinearGradient(x + stalkWidth/2 - 2, groundY - height, x + stalkWidth/2, groundY);
            stalkShadowGradient.addColorStop(0, 'rgba(0, 0, 0, 0.25)');
            stalkShadowGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
            ctx.fillStyle = stalkShadowGradient;
            ctx.fillRect(x + stalkWidth/2 - 2, groundY - height, 2, height);
            
            // Sap detaylarÄ± (dÃ¼ÄŸÃ¼mler - daha belirgin)
            ctx.strokeStyle = 'rgba(27, 94, 32, 0.6)';
            ctx.lineWidth = 1.5;
            for (let i = 0; i < 5; i++) {
                const nodeY = groundY - height * (0.15 + i * 0.2);
                const nodeWidth = stalkWidth * 0.8;
                ctx.beginPath();
                ctx.moveTo(x - nodeWidth/2, nodeY);
                ctx.lineTo(x + nodeWidth/2, nodeY);
                ctx.stroke();
            }
            
            // KoÃ§an (daha estetik ve detaylÄ±)
            const cobSize = Math.max(8, (rate / 100) * 26);
            const cobY = groundY - height * 0.93;
            
            // KoÃ§an gÃ¶lgesi (daha yumuÅŸak)
            const cobShadowGradient = ctx.createRadialGradient(
                x + 2, cobY + 2, 0, x + 2, cobY + 2, cobSize * 1.8
            );
            cobShadowGradient.addColorStop(0, 'rgba(0, 0, 0, 0.3)');
            cobShadowGradient.addColorStop(0.5, 'rgba(0, 0, 0, 0.1)');
            cobShadowGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
            ctx.fillStyle = cobShadowGradient;
            ctx.beginPath();
            ctx.ellipse(x + 2, cobY + 2, cobSize, cobSize * 1.8, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // KoÃ§an (daha zengin ve gerÃ§ekÃ§i gradient)
            const cobGradient = ctx.createLinearGradient(x, cobY - cobSize * 1.7, x, cobY + cobSize * 1.7);
            cobGradient.addColorStop(0, '#fffde7');
            cobGradient.addColorStop(0.15, '#fff9c4');
            cobGradient.addColorStop(0.35, '#ffeb3b');
            cobGradient.addColorStop(0.55, '#ffc107');
            cobGradient.addColorStop(0.75, '#ff9800');
            cobGradient.addColorStop(1, '#f57c00');
            
            ctx.fillStyle = cobGradient;
            ctx.beginPath();
            ctx.ellipse(x, cobY, cobSize, cobSize * 1.8, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // KoÃ§an highlight (daha belirgin ve Ã§ok katmanlÄ±)
            const highlightGradient = ctx.createLinearGradient(x, cobY - cobSize * 1.7, x, cobY);
            highlightGradient.addColorStop(0, 'rgba(255, 255, 255, 0.5)');
            highlightGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
            ctx.fillStyle = highlightGradient;
            ctx.beginPath();
            ctx.ellipse(x - 3, cobY - cobSize * 1.2, cobSize * 0.7, cobSize * 1.2, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Ä°kinci highlight (daha yumuÅŸak)
            ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.beginPath();
            ctx.ellipse(x - 2, cobY - cobSize * 0.9, cobSize * 0.5, cobSize * 0.8, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Tane detaylarÄ± (daha gerÃ§ekÃ§i ve belirgin)
            const rows = Math.floor(cobSize / 2.2);
            const cols = Math.floor(cobSize * 1.8 / 2.2);
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    const grainX = x - (cols - 1) * 2.2 / 2 + col * 2.2;
                    const grainY = cobY - (rows - 1) * 2.2 / 2 + row * 2.2;
                    const grainSize = 1.4 + Math.sin(row + col) * 0.2;
                    
                    // Tane gÃ¶lgesi (daha yumuÅŸak)
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                    ctx.beginPath();
                    ctx.arc(grainX + 0.5, grainY + 0.5, grainSize, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Tane (daha zengin gradient)
                    const grainGradient = ctx.createRadialGradient(
                        grainX - grainSize * 0.3, grainY - grainSize * 0.3, 0,
                        grainX, grainY, grainSize
                    );
                    grainGradient.addColorStop(0, '#fff9c4');
                    grainGradient.addColorStop(0.5, '#fff59d');
                    grainGradient.addColorStop(1, '#ff9800');
                    
                    ctx.fillStyle = grainGradient;
                    ctx.beginPath();
                    ctx.arc(grainX, grainY, grainSize, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Tane highlight
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';
                    ctx.beginPath();
                    ctx.arc(grainX - grainSize * 0.3, grainY - grainSize * 0.3, grainSize * 0.4, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // KoÃ§an yapraklarÄ± (yeÅŸil - daha gerÃ§ekÃ§i)
            for (let i = 0; i < 4; i++) {
                const huskAngle = (i - 1.5) * Math.PI / 10;
                const huskX = x + Math.cos(huskAngle) * cobSize * 1.3;
                const huskY = cobY + Math.sin(huskAngle) * cobSize * 0.9;
                
                // Yaprak gÃ¶lgesi
                ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
                ctx.beginPath();
                ctx.ellipse(huskX + 1, huskY + 1, cobSize * 0.9, cobSize * 1.3, huskAngle, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak
                const huskGradient = ctx.createLinearGradient(
                    huskX - cobSize * 0.9, huskY, huskX + cobSize * 0.9, huskY
                );
                huskGradient.addColorStop(0, '#1b5e20');
                huskGradient.addColorStop(0.5, '#2e7d32');
                huskGradient.addColorStop(1, '#388e3c');
                
                ctx.fillStyle = huskGradient;
                ctx.beginPath();
                ctx.ellipse(huskX, huskY, cobSize * 0.9, cobSize * 1.3, huskAngle, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak damarÄ±
                ctx.strokeStyle = '#1b5e20';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(huskX - Math.cos(huskAngle) * cobSize * 0.5, huskY - Math.sin(huskAngle) * cobSize * 0.5);
                ctx.lineTo(huskX + Math.cos(huskAngle) * cobSize * 0.5, huskY + Math.sin(huskAngle) * cobSize * 0.5);
                ctx.stroke();
            }
        }
        
        // Biber Ã§iz (yeni bitki)
        function drawPepper(ctx, x, groundY, height, rate) {
            // Ana gÃ¶vde (gradient)
            const stemGradient = ctx.createLinearGradient(x, groundY, x, groundY - height * 0.75);
            stemGradient.addColorStop(0, '#1b5e20');
            stemGradient.addColorStop(1, '#2e7d32');
            
            ctx.strokeStyle = stemGradient;
            ctx.lineWidth = 4;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(x, groundY);
            ctx.lineTo(x, groundY - height * 0.75);
            ctx.stroke();
            
            // Yan dallar
            ctx.lineWidth = 2.5;
            for (let i = 0; i < 4; i++) {
                const branchY = groundY - height * (0.25 + i * 0.15);
                const branchAngle = (i % 2 === 0 ? -Math.PI / 8 : Math.PI / 8);
                ctx.beginPath();
                ctx.moveTo(x, branchY);
                ctx.lineTo(
                    x + Math.cos(branchAngle) * 15,
                    branchY + Math.sin(branchAngle) * 15
                );
                ctx.stroke();
            }
            
            // Yapraklar (gerÃ§ekÃ§i)
            for (let i = 0; i < 6; i++) {
                const angle = (i * Math.PI * 2 / 6);
                const leafX = x + Math.cos(angle) * 20;
                const leafY = groundY - height * (0.4 + i * 0.1);
                
                // Yaprak gÃ¶lgesi
                ctx.fillStyle = 'rgba(0, 0, 0, 0.12)';
                ctx.beginPath();
                ctx.ellipse(leafX + 2, leafY + 2, 12, 16, angle, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak
                const leafGradient = ctx.createLinearGradient(
                    leafX - 12, leafY, leafX + 12, leafY
                );
                leafGradient.addColorStop(0, '#1b5e20');
                leafGradient.addColorStop(0.5, '#4caf50');
                leafGradient.addColorStop(1, '#388e3c');
                
                ctx.fillStyle = leafGradient;
                ctx.beginPath();
                ctx.ellipse(leafX, leafY, 12, 16, angle, 0, Math.PI * 2);
                ctx.fill();
                
                // Yaprak damarÄ±
                ctx.strokeStyle = '#2e7d32';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(leafX, leafY);
                ctx.lineTo(leafX + Math.cos(angle) * 14, leafY + Math.sin(angle) * 14);
                ctx.stroke();
            }
            
            // Biberler (gerÃ§ekÃ§i)
            const pepperCount = Math.floor(rate / 16);
            for (let i = 0; i < Math.min(pepperCount, 7); i++) {
                const pepperY = groundY - height * (0.2 + i * 0.12);
                const pepperX = x + (i % 2 === 0 ? -16 : 16) + (i % 3 === 0 ? 0 : (i % 2 === 0 ? -4 : 4));
                const pepperSize = 7 + Math.sin(i) * 1.5;
                const pepperHeight = 12 + Math.sin(i * 0.5) * 2;
                
                // Biber gÃ¶lgesi
                const shadowGradient = ctx.createRadialGradient(
                    pepperX + 1, pepperY + 1, 0, pepperX + 1, pepperY + 1, pepperSize
                );
                shadowGradient.addColorStop(0, 'rgba(0, 0, 0, 0.25)');
                shadowGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
                ctx.fillStyle = shadowGradient;
                ctx.beginPath();
                ctx.ellipse(pepperX + 1, pepperY + 1, pepperSize, pepperHeight, -Math.PI / 6, 0, Math.PI * 2);
                ctx.fill();
                
                // Biber (gradient - kÄ±rmÄ±zÄ± veya yeÅŸil)
                const isRed = rate > 50;
                const pepperGradient = ctx.createRadialGradient(
                    pepperX - 2, pepperY - 2, 0, pepperX, pepperY, pepperSize
                );
                if (isRed) {
                    pepperGradient.addColorStop(0, '#ff6b6b');
                    pepperGradient.addColorStop(0.5, '#ee5a6f');
                    pepperGradient.addColorStop(1, '#c92a2a');
                } else {
                    pepperGradient.addColorStop(0, '#51cf66');
                    pepperGradient.addColorStop(0.5, '#40c057');
                    pepperGradient.addColorStop(1, '#2f9e44');
                }
                
                ctx.fillStyle = pepperGradient;
                ctx.beginPath();
                ctx.ellipse(pepperX, pepperY, pepperSize, pepperHeight, -Math.PI / 6, 0, Math.PI * 2);
                ctx.fill();
                
                // Biber highlight
                ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';
                ctx.beginPath();
                ctx.ellipse(pepperX - 2, pepperY - 2, pepperSize * 0.4, pepperHeight * 0.3, -Math.PI / 6, 0, Math.PI * 2);
                ctx.fill();
                
                // Biber sapÄ± (yeÅŸil)
                ctx.fillStyle = '#2e7d32';
                ctx.beginPath();
                ctx.arc(pepperX, pepperY - pepperHeight * 0.7, 3, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // SimÃ¼lasyonu baÅŸlat
        function startSimulation() {
            if (isRunning) return;
            
            isRunning = true;
            time = 0;
            
            // FaktÃ¶rleri hedef deÄŸerlere eÅŸitle
            Object.keys(factors).forEach(key => {
                factors[key] = targetFactors[key];
            });
            
            calculatePhotosynthesis();
            
            // Animasyon dÃ¶ngÃ¼sÃ¼
            function animate() {
                if (!isRunning) return;
                
                time += 0.016; // ~60 FPS
                
                // FaktÃ¶rleri yavaÅŸÃ§a gÃ¼ncelle
                updateFactorsSmoothly();
                
                // Rastgele deÄŸiÅŸimler ekle (gerÃ§ekÃ§ilik iÃ§in)
                if (Math.random() < 0.01) {
                    targetFactors.light += (Math.random() - 0.5) * 5;
                    targetFactors.light = Math.max(0, Math.min(100, targetFactors.light));
                    document.getElementById('light').value = targetFactors.light;
                    updateFactor('light', targetFactors.light);
                }
                
                calculatePhotosynthesis();
                animationId = requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        // SimÃ¼lasyonu sÄ±fÄ±rla
        function resetSimulation() {
            isRunning = false;
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            // FaktÃ¶rleri sÄ±fÄ±rla
            factors = {
                light: 70,
                temperature: 25,
                co2: 400,
                water: 60,
                humidity: 50
            };
            
            targetFactors = {
                light: 70,
                temperature: 25,
                co2: 400,
                water: 60,
                humidity: 50
            };
            
            // Input deÄŸerlerini sÄ±fÄ±rla
            document.getElementById('light').value = 70;
            document.getElementById('temperature').value = 25;
            document.getElementById('co2').value = 400;
            document.getElementById('water').value = 60;
            document.getElementById('humidity').value = 50;
            
            // GÃ¶rÃ¼ntÃ¼lenen deÄŸerleri sÄ±fÄ±rla
            document.getElementById('light-value').textContent = '70%';
            document.getElementById('temperature-value').textContent = '25Â°C';
            document.getElementById('co2-value').textContent = '400 ppm';
            document.getElementById('water-value').textContent = '60%';
            document.getElementById('humidity-value').textContent = '50%';
            
            // Bitkileri ve oranlarÄ± sÄ±fÄ±rla
            plants.forEach((plant, index) => {
                const rateFill = document.getElementById(`rate-fill-${index}`);
                const rateValue = document.getElementById(`rate-value-${index}`);
                if (rateFill) {
                    rateFill.style.width = '0%';
                    rateFill.textContent = '0%';
                }
                if (rateValue) {
                    rateValue.textContent = '0%';
                }
                // Canvas ile bitkiyi sÄ±fÄ±rla
                drawPlant(index, 0, plant);
            });
            
            // Ä°statistikleri sÄ±fÄ±rla
            document.getElementById('avg-rate').textContent = '0%';
            document.getElementById('max-rate').textContent = '0%';
            document.getElementById('min-rate').textContent = '0%';
            
            // SonuÃ§ metnini sÄ±fÄ±rla
            const resultsText = document.getElementById('results-text');
            if (resultsText) {
                resultsText.textContent = 'Deneyi baÅŸlatÄ±n...';
            }
        }
        
        // Sayfa yÃ¼klendiÄŸinde
        document.addEventListener('DOMContentLoaded', function() {
            createPlants();
            // Ä°lk Ã§izimleri yap
            plants.forEach((plant, index) => {
                drawPlant(index, 0, plant);
            });
        });
    </script>
    <script src="script.js"></script>
    <script src="floating-chat.js"></script>
</body>
</html>



